(self.webpackChunkworkers=self.webpackChunkworkers||[]).push([[927,425],{927:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});s(43);var a=s(216),n=s(425),o=(s(50),s(579));const i=e=>{let{role:t}=e;return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:t.role.name}),(0,o.jsx)("td",{children:(0,n.formatDateString)(t.startDate)}),(0,o.jsx)("td",{children:t.isManagement?(0,o.jsx)("i",{className:"check icon"}):(0,o.jsx)("i",{className:"x icon"})})]})},r=()=>{const e=(0,a.Zp)(),{state:t}=(0,a.zy)(),{firstName:s,lastName:r,identity:l,startDate:c,roles:d}=t;return(0,o.jsxs)("div",{className:"square-box",children:[(0,o.jsx)("button",{className:"close-button",onClick:()=>e("/EmployeeList"),children:(0,o.jsx)("i",{className:"window close icon"})}),(0,o.jsxs)("div",{className:"employee-details",children:[(0,o.jsxs)("div",{className:"employee-info",children:[(0,o.jsx)("label",{className:"employee-label",children:"Name:"}),(0,o.jsxs)("p",{className:"employee-value",children:[s," ",r]})]}),(0,o.jsxs)("div",{className:"employee-info",children:[(0,o.jsx)("label",{className:"employee-label",children:"Identity:"}),(0,o.jsx)("p",{className:"employee-value",children:l})]}),(0,o.jsxs)("div",{className:"employee-info",children:[(0,o.jsx)("label",{className:"employee-label",children:"Start Date:"}),(0,o.jsx)("p",{className:"employee-value",children:(0,n.formatDateString)(c)})]})]}),(0,o.jsx)("br",{}),(0,o.jsxs)("div",{className:"table-container",children:[(0,o.jsx)("div",{id:"taitel",className:"ui horizontal divider header ",style:{fontSize:"24px",color:"rgb(19 23 122)"},children:"Roles"}),(0,o.jsx)("br",{}),(0,o.jsxs)("table",{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Role Name"}),(0,o.jsx)("th",{children:"Start Date"}),(0,o.jsx)("th",{children:"Is Management"})]})}),(0,o.jsx)("tbody",{children:d.map(((e,t)=>(0,o.jsx)(i,{role:e},t)))})]})]})]})}},425:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u,formatDateString:()=>c});var a=s(43),n=s(3),o=s(216),i=s(702),r=s(450),l=(s(50),s(579));function c(e){return new Date(e).toLocaleDateString()}const d=e=>{let{user:t,employees:s}=e;const[d,u]=(0,a.useState)(""),m=(0,a.useRef)(null),p=(0,o.Zp)(),h=(0,n.wA)();(0,a.useEffect)((()=>{h((0,i.l3)(t))}),[]),(0,a.useEffect)((()=>{const e=setTimeout((()=>{d===m.current&&setTimeout((()=>{h(""!==d?(0,i.Ii)(t,d):(0,i.l3)(t))}),500)}),500);return()=>clearTimeout(e)}),[d]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"ui rigth icon input",children:[(0,l.jsx)("input",{type:"text",placeholder:"Search...",value:d,onChange:e=>{u(e.target.value),m.current=e.target.value}}),(0,l.jsx)("i",{className:"search icon"})]}),(0,l.jsxs)("button",{className:"button",onClick:()=>{const e=s.map((e=>[e.firstName,e.lastName,e.identity,e.startDate].join(","))).join("\n"),t=new Blob([e],{type:"text/csv;charset=utf-8"});(0,r.saveAs)(t,"employees.csv")},children:[(0,l.jsx)("i",{className:"file excel icon"})," Export CSV"]}),(0,l.jsxs)("button",{className:"button",onClick:()=>window.print(),children:[(0,l.jsx)("i",{className:"print icon"})," Print"]}),(0,l.jsxs)("button",{className:"button",onClick:()=>p("AddEmployee"),children:[(0,l.jsx)("i",{className:"add user icon"})," Add Employee "]}),(0,l.jsx)("div",{id:"taitel",className:"ui horizontal divider header ",style:{fontSize:"24px",color:"rgb(19 23 122)"},children:"Employees "}),(0,l.jsx)("br",{}),(0,l.jsx)("div",{className:"ui special cards printable-content",children:(0,l.jsxs)("table",{className:"ui blue table ",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"firstName"}),(0,l.jsx)("th",{children:"lastName"}),(0,l.jsx)("th",{children:"identity"}),(0,l.jsx)("th",{children:"startDate"}),(0,l.jsx)("th",{children:"edit"}),(0,l.jsx)("th",{children:"-"}),(0,l.jsx)("th",{children:"details"})]})}),(0,l.jsxs)("tbody",{children:[(0,l.jsx)(o.sv,{}),null===s||void 0===s?void 0:s.map((e=>(e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:e.firstName}),(0,l.jsx)("td",{children:e.lastName}),(0,l.jsx)("td",{children:e.identity}),(0,l.jsx)("td",{children:c(e.startDate)}),(0,l.jsx)("td",{children:(0,l.jsx)("button",{className:"button but",disabled:"false"==localStorage.getItem("isDirector")&&t.id==e.id,onClick:()=>{p("AddEmployee",{state:e})},children:(0,l.jsx)("i",{className:"edit outline icon"})})}),(0,l.jsx)("td",{children:(0,l.jsx)("button",{className:"button but",disabled:t.id==e.id,onClick:()=>{h((0,i.Qu)(e.id))},children:(0,l.jsx)("i",{className:"trash alternate icon"})})}),(0,l.jsx)("td",{children:(0,l.jsx)("button",{className:"button but",onClick:()=>{p("EmployeeDetails",{state:e})},children:(0,l.jsx)("i",{className:"sidebar icon "})})})]},e.id))(e)))]})]})})]})},u=()=>{const{state:e}=(0,o.zy)(),{user:t,employees:s}=(0,n.d4)((e=>({user:e.User.user,employees:e.Employee.employees})));return(0,l.jsx)(d,{user:t,employees:s})}},702:(e,t,s)=>{"use strict";s.d(t,{Ii:()=>d,JE:()=>p,Ql:()=>m,Qu:()=>u,l3:()=>c});var a=s(93),n=s(154),o=s(64),i=s.n(o);const r="https://localhost:7079/api/Employee",l=(e,t)=>{if("true"===localStorage.getItem("isDirector"))return t;const s=e.roles.filter((e=>e.isManagement));if(0===s.length)return[];return t.filter((t=>s.some((s=>t.roles.some((a=>a.role.id===s.role.id||e.id===t.id))))))},c=e=>async t=>{try{const s=await n.A.get(r),o=l(e,s.data);t({type:a.dO,data:o})}catch(s){console.error(s)}},d=(e,t)=>async s=>{try{const o=await n.A.get("".concat(r,"/name=").concat(t)),i=l(e,o.data);s({type:a.dO,data:i})}catch(o){console.error(o)}},u=e=>async t=>{try{await n.A.delete("".concat(r,"/").concat(e)),i().fire({position:"top",icon:"success",title:"The employee has been marked as inactive",showConfirmButton:!1,timer:1e3}),t({type:a.j2,data:e})}catch(s){i().fire({icon:"error",title:"Oops...",text:"Error deleting employee",footer:'<a href="#">Back to adding an employee?/a>'})}},m=e=>async t=>{try{const s=await n.A.post(r,e);t({type:a.ls,data:s.data}),i().fire({position:"top",icon:"success",title:"The employee was successfully added",showConfirmButton:!1,timer:1500})}catch(s){i().fire({icon:"error",title:"Oops...",text:"Adding employee failed",footer:'<a href="#">Back to adding an employee?</a>'})}},p=e=>async t=>{try{const s=await n.A.put("".concat(r,"/").concat(e.Id),{...e});t({type:a.uv,data:s.data}),i().fire({position:"top",icon:"success",title:"The employee details have been updated successfully",showConfirmButton:!1,timer:1500})}catch(s){i().fire({icon:"error",title:"Oops...",text:"Error editing employee",footer:'<a href="#">Back to employees/a>'})}}},450:function(e,t,s){var a,n,o;n=[],void 0===(o="function"===typeof(a=function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function a(e,t,s){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){l(a.response,t,s)},a.onerror=function(){console.error("could not download file")},a.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(a){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof s.g&&s.g.global===s.g?s.g:void 0,r=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!r?function(e,t,s){var r=i.URL||i.webkitURL,l=document.createElement("a");t=t||e.name||"download",l.download=t,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?o(l):n(l.href)?a(e,t,s):o(l,l.target="_blank")):(l.href=r.createObjectURL(e),setTimeout((function(){r.revokeObjectURL(l.href)}),4e4),setTimeout((function(){o(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,s,i){if(s=s||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,i),s);else if(n(e))a(e,s,i);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout((function(){o(r)}))}}:function(e,t,s,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),"string"==typeof e)return a(e,t,s);var o="application/octet-stream"===e.type,l=/constructor/i.test(i.HTMLElement)||i.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||o&&l||r)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var e=d.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=e:location=e,n=null},d.readAsDataURL(e)}else{var u=i.URL||i.webkitURL,m=u.createObjectURL(e);n?n.location=m:location.href=m,n=null,setTimeout((function(){u.revokeObjectURL(m)}),4e4)}});i.saveAs=l.saveAs=l,e.exports=l})?a.apply(t,n):a)||(e.exports=o)}}]);
//# sourceMappingURL=927.00a97bae.chunk.js.map